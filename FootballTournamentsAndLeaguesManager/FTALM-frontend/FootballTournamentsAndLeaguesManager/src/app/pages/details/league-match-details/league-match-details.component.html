<div class="match-details-container">
  <div class="match-details-header" *ngIf="match">
    <h3>
      {{ match.homeTeamName }} 
      <span>{{ match.homeTeamScore}} : </span>
      <span>{{ match.awayTeamScore}}</span>
      {{ match.awayTeamName }}
    </h3> 
  </div>

  <mat-label>Time line view </mat-label>
  <mat-slide-toggle [(ngModel)]="isTimeLineView"></mat-slide-toggle>

  <div class="card-container" *ngIf="!isTimeLineView">
    <mat-card *ngFor="let event of matchEvents" class="card-event">
      <div class="event-header">
        <div *ngIf="event.type === GOAL_ASSIST_EVENT_ID">
          <i class="fa-regular fa-futbol"></i>
        </div>
        <div *ngIf="event.type === CARD_EVENT_ID">
          <div class="icon-container">
            <div *ngIf="event.details.cardType == 'YELLOW' || event.details.cardType == 'SECOND_YELLOW'" class="square yellow">
              <div *ngIf="event.details.cardType == 'SECOND_YELLOW'" class="square-second-yellow"></div>
            </div>
            <div *ngIf="event.details.cardType == 'RED'" class="square red"></div>
          </div>
        </div>
        <div *ngIf="event.type === SUBSTITUTION_EVENT_ID">
          <div class="icon-container">
            <i class="bi bi-arrow-up"></i>
            <i class="bi bi-arrow-down"></i>
          </div>
        </div>
        <span *ngIf="event.type === GOAL_ASSIST_EVENT_ID" class="event-type">GOAL!!!</span>
        <span *ngIf="event.details.cardType == 'YELLOW'" class="event-type">YELLOW CARD</span>
        <span *ngIf="event.details.cardType == 'SECOND_YELLOW' || event.details.cardType == 'RED'" class="event-type">RED CARD</span>
        <span *ngIf="event.type === SUBSTITUTION_EVENT_ID" class="event-type">SUBSTITUTION</span>
        {{ event.details.minute }}'
      </div>

      <div class="card-event-details">
        <div>
          <span *ngIf="event.type === GOAL_ASSIST_EVENT_ID">
            {{ event.details.scorerPlayerFirstName }} {{ event.details.scorerPlayerLastName }}
            {{ event.details.assistPlayerFirstName }} {{ event.details.assistPlayerLastName }} (Assist)
          </span>
          <span *ngIf="event.type === CARD_EVENT_ID">
            {{ event.details.playerFirstName }} {{ event.details.playerLastName }}
          </span>
          <span *ngIf="event.type === SUBSTITUTION_EVENT_ID">
            in: {{ event.details.enteringPlayerFirstName }} {{ event.details.enteringPlayerLastName }}
            out: {{ event.details.exitingPlayerFirstName }} {{ event.details.exitingPlayerLastName }}
          </span>
        </div>
        <div class="right-container">
          {{ event.details.teamName }}
        </div>
      </div>
    </mat-card>
  </div>
    
  <div class="timeline" *ngIf="isTimeLineView">
    <div class="checkpoint" *ngFor="let event of matchEvents">
      <div class="home-team-event" *ngIf="event.details.teamId  === homeTeamId">
        <div class="container" *ngIf="event.type === GOAL_ASSIST_EVENT_ID">
          <span> {{ event.details.scorerPlayerFirstName.substring(0, 1) }}. {{ event.details.scorerPlayerLastName }} </span>
          <i class="fa-regular fa-futbol"></i>
          <span class="event-minute"> {{event.details.minute}}' </span>
        </div>
        <div class="container" *ngIf="event.type === CARD_EVENT_ID">
          <span> {{event.details.playerFirstName.substring(0, 1)}}. {{event.details.playerLastName}} </span>
          <div *ngIf="event.details.cardType == 'YELLOW' || event.details.cardType == 'SECOND_YELLOW'" class="square-small yellow">
            <div *ngIf="event.details.cardType == 'SECOND_YELLOW'" class="square-small-second-yellow"></div>
          </div>
          <div *ngIf="event.details.cardType == 'RED'" class="square red"></div>
          <span class="event-minute"> {{event.details.minute}}' </span>
        </div>
        <div class="container" *ngIf="event.type === SUBSTITUTION_EVENT_ID">
          <div class="icon-container middle">
            <i class="bi bi-arrow-up"></i>
            <i class="bi bi-arrow-down"></i>
          </div>
          In: {{ event.details.enteringPlayerFirstName.substring(0, 1) }}. {{ event.details.enteringPlayerLastName }}
          Out: {{ event.details.exitingPlayerFirstName.substring(0, 1) }}. {{ event.details.exitingPlayerLastName }}
          <span class="event-minute"> {{event.details.minute}}' </span>
        </div>

        <div class="home-line"></div>
      </div>
      <div class="time-line-point"></div>
      <div class="away-team-event" *ngIf="event.details.teamId  === awayTeamId">
        <div class="container" *ngIf="event.type === GOAL_ASSIST_EVENT_ID">
          <span class="event-minute"> {{event.details.minute}}' </span>
          <i class="fa-regular fa-futbol"></i>
          <span> {{ event.details.scorerPlayerFirstName.substring(0, 1) }}. {{ event.details.scorerPlayerLastName }} </span>
        </div>
        <div class="container" *ngIf="event.type === CARD_EVENT_ID">
          <span class="event-minute"> {{event.details.minute}}' </span>
          <div *ngIf="event.details.cardType == 'YELLOW' || event.details.cardType == 'SECOND_YELLOW'" class="square-small yellow">
            <div *ngIf="event.details.cardType == 'SECOND_YELLOW'" class="square-small-second-yellow"></div>
          </div>
          <div *ngIf="event.details.cardType == 'RED'" class="square red"></div>
          <span> {{event.details.playerFirstName.substring(0, 1)}}. {{event.details.playerLastName}} </span>
        </div>
        <div class="container" *ngIf="event.type === SUBSTITUTION_EVENT_ID">
          <span class="event-minute"> {{event.details.minute}}' </span>
          <div class="icon-container">
            <i class="bi bi-arrow-up"></i>
            <i class="bi bi-arrow-down"></i>
          </div>
          In: {{ event.details.enteringPlayerFirstName.substring(0, 1) }}. {{ event.details.enteringPlayerLastName }}
          Out: {{ event.details.exitingPlayerFirstName.substring(0, 1) }}. {{ event.details.exitingPlayerLastName }}
        </div>
        <div class="away-line"></div>
      </div>
    </div>
  </div>

</div>